!function(e){function t(t){for(var r,i,l=t[0],c=t[1],u=t[2],m=0,f=[];m<l.length;m++)i=l[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(s&&s(t);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var s=c;o.push([135,1]),n()}({135:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(4),i=n.n(o),l=(n(98),n(0)),c=n.n(l),u=n(43),s=n.n(u),m=n(2),f=n.n(m),d=n(12),p=n.n(d),h=(n(44),n(11)),v=n.n(h),b=(n(138),n(137));n(126);var g=n(127);Object(b.b)({fetch:g});var y="https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/BLS_Monthly_Unemployment_Current_14_Months/FeatureServer",E="fips, PctUnemployed_CurrentMonth, PctUnemployed_01Month, PctUnemployed_02Month, PctUnemployed_03Month, PctUnemployed_04Month, PctUnemployed_05Month, PctUnemployed_06Month, PctUnemployed_07Month, PctUnemployed_08Month, PctUnemployed_09Month, PctUnemployed_10Month, PctUnemployed_11Month, PctUnemployed_12Month, PctUnemployed_13Month, CurrentMonth, P13Month, LaborForce_CurrentMonth, Unemployed_CurrentMonth",x=("f=json&where=1=1&returnGeometry=false&returnCentroid=true&outSR=4326&outFields=".concat(E),function(){var e=i()(a.a.mark((function e(){var t,n,r,o,i,l,c,u,s,m,f,d,h,v,b,g,E,x,w;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,p.a.get("".concat(y,"/0/query"),{params:{where:"1=1",outFields:["CurrentMonth","P01Month","P02Month","P03Month","P04Month","P05Month","P06Month","P07Month","P08Month","P09Month","P10Month","P11Month","P12Month","P13Month"].join(","),returnGeometry:!1,f:"json"}});case 3:return n=e.sent,(r=n.data).features&&(o=r.features[0],i=o.attributes,l=i.CurrentMonth,c=i.P01Month,u=i.P02Month,s=i.P03Month,m=i.P04Month,f=i.P05Month,d=i.P06Month,h=i.P07Month,v=i.P08Month,b=i.P09Month,g=i.P10Month,E=i.P11Month,x=i.P12Month,w=i.P13Month,t=[l,c,u,s,m,f,d,h,v,b,g,E,x,w].reverse()),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),w=n(10),j=Object(l.createContext)(null),O=function(){var e=i()(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"./public",e.prev=1,e.next=4,p.a.get("".concat("./public","/").concat(t));case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),M=function(e){var t=e.children,n=Object(l.useState)(),r=f()(n,2),o=r[0],u=r[1],s=function(){var e=i()(a.a.mark((function e(){var t,n,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("unemployment-states-paths.json");case 3:return t=e.sent,e.next=6,O("unemployment-counties-paths.json");case 6:return n=e.sent,e.next=9,O("unemployment-national-paths.json");case 9:return r=e.sent,e.next=12,O("unemployment-data.json");case 12:return o=e.sent,e.next=15,x();case 15:i=e.sent,u({unemploymentDataPathsStates:t,unemploymentDataPathsCounties:n,unemploymentDataPathsUS:r,unemploymentDataByFIPS:o,months:i,isMobileDevice:w.miscFns.isMobileDevice()}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return c.a.useEffect((function(){s()}),[]),c.a.createElement(j.Provider,{value:o},o?t:null)},S=n(8),k=w.urlFns.parseHash(),P=function(e){return"@"===e?L(k):k[e]||null},C=function(e){if(e){var t=e.lon,n=e.lat,r=e.zoom;w.urlFns.updateHashParam({key:"@",value:"".concat(t,",").concat(n,",").concat(r)})}},L=function(e){if(!e["@"])return null;var t=e["@"].split(",").map((function(e){return+e})),n=f()(t,3);return{lon:n[0],lat:n[1],zoom:n[2]}},z=function(e){w.urlFns.updateHashParam({key:"fips",value:e||""})},F=P("@"),U=function(e){var t=e.webmapId,n=e.children,r=c.a.useRef(),o=c.a.useState(null),l=f()(o,2),u=l[0],s=l[1],m=function(){var e=i()(a.a.mark((function e(){var n,o,i,l,c,u,m,d,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.loadModules)(["esri/views/MapView","esri/WebMap"]);case 3:n=e.sent,o=f()(n,2),i=o[0],l=o[1],u=(c=F||{}).lat,m=c.lon,d=c.zoom,p=m&&u?[m,u]:void 0,(h=new i({container:r.current,map:new l({portalItem:{id:t}}),center:p,zoom:d,padding:{top:60}})).when((function(){s(h)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=i()(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.loadModules)(["esri/core/watchUtils"]);case 3:t=e.sent,n=f()(t,1),n[0].whenTrue(u,"stationary",(function(){if(-1!==u.zoom){var e={lat:u.center&&u.center.latitude?+u.center.latitude.toFixed(3):0,lon:u.center&&u.center.longitude?+u.center.longitude.toFixed(3):0,zoom:u.zoom};C(e)}})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return c.a.useEffect((function(){Object(S.loadCss)(),m()}),[]),c.a.useEffect((function(){u&&d()}),[u]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},ref:r}),u?c.a.Children.map(n,(function(e){return c.a.cloneElement(e,{mapView:u})})):null)},A={min:99999999,max:3e6},I={min:3e6,max:0},H=[255,155,10,255],D=[51,146,214,255],_=P("fips"),R=function(){var e=Object(l.useContext)(j),t=e.unemploymentDataPathsStates,n=e.unemploymentDataPathsCounties,r=e.unemploymentDataPathsUS,a=e.unemploymentDataByFIPS,o=Object(l.useState)(a[_]),i=f()(o,2),u=i[0],s=i[1],m=Object(l.useState)(!1),d=f()(m,2),p=d[0],h=d[1],v=Object(l.useState)(),b=f()(v,2),g=b[0],y=b[1],E=Object(l.useState)(!1),x=f()(E,2),w=x[0],O=x[1];return Object(l.useEffect)((function(){if(g){var e=g?g.attributes.FIPS||g.attributes.STATE_FIPS:void 0;s(a[e]),z(e)}}),[g]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ie,{isActive:w,onClose:O.bind(void 0,!1)}),c.a.createElement(te,{infoBtnOnClick:O.bind(void 0,!0)},c.a.createElement(Te,{showDeviation:p,onChange:h.bind(void 0,!p)})),c.a.createElement(U,{webmapId:"8054e038927a48419ee0dddb86006ad6"},c.a.createElement(Be,{showDeviation:p,nationalLevelData:r,data:t,visibleScale:A,color:H,referenceLineColor:D}),c.a.createElement(Be,{showDeviation:p,nationalLevelData:r,data:n,visibleScale:I,color:H,referenceLineColor:D}),c.a.createElement(Ne,{key:"query-4-US-Counties",url:"https://services.arcgis.com/P3ePLMYs2RVChkJx/ArcGIS/rest/services/USA_Counties_Generalized/FeatureServer/0",outFields:["FIPS"],visibleScale:I,onSelect:y}),c.a.createElement(Ne,{key:"query-4-US-States",url:"https://services.arcgis.com/P3ePLMYs2RVChkJx/ArcGIS/rest/services/USA_States_Generalized/FeatureServer/0",outFields:["STATE_FIPS"],visibleScale:A,onSelect:y}),c.a.createElement(Re,{queryResult:g})),c.a.createElement(_e,{data:u,close:function(){y(null),s(null),z()}}))},N=n(6),B=n.n(N),G=n(7),T=n(45),V=n.n(T),W={default:"font-size-0",small:"font-size--2",medium:"font-size-2",large:"font-size-4"},q=function(e){var t=e.color,n=void 0===t?"blue":t,r=e.size,a=void 0===r?"default":r,o=e.customFontSize,i=e.customLineHeight,l=e.children,u=V()("avenir-bold ".concat(o?"":W[a]),{"text-theme-color-orange":"orange"===n,"text-theme-color-blue":"blue"===n}),s=o||i?{fontSize:o||"default",lineHeight:i||"default"}:null;return c.a.createElement("span",{className:u,style:s},l)},J=function(e){var t=e.value,n=e.title,r=e.subtitle;return c.a.createElement("div",{className:"trailer-quarter"},c.a.createElement("div",null,c.a.createElement(q,{color:"blue"},n)),c.a.createElement("div",{style:{display:"flex",alignItems:"flex-start"}},c.a.createElement(q,{color:"orange",size:"large",customLineHeight:"1"},t),r?c.a.createElement("div",{className:"margin-left-quarter",style:{lineHeight:"1"}},c.a.createElement(q,{color:"orange",size:"small",customLineHeight:"1"},r)):null))};function Y(){var e=B()(["\n    margin: 0 0.5rem;\n    line-height: 1.2;\n\n    @media (max-width: 1113px) {\n        display: none;\n    }\n"]);return Y=function(){return e},e}function X(){var e=B()(["\n    margin-right: 0.5rem;\n\n    @media (max-width: 826px) {\n        display: none;\n    }\n"]);return X=function(){return e},e}function Z(){var e=B()(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    display: flex;\n    background: linear-gradient(\n        to bottom,\n        "," 0%,\n        "," 50%,\n        rgba(0, 0, 0, 0) 100%\n    );\n    z-index: 5;\n    box-sizing: border-box;\n    padding: 0.5rem 1rem;\n    justify-content: space-between;\n\n    svg {\n        fill: ",";\n        stroke: ",";\n    }\n"]);return Z=function(){return e},e}var K=G.a.div(Z(),"rgba(3, 26, 57, 0.9)","rgba(3, 26, 57, 0.9)","#136AA4","#136AA4"),Q=G.a.div(X()),$=G.a.div(Y()),ee=function(e){var t=e.infoBtnOnClick;return c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement(Q,null,c.a.createElement(q,{size:"large",color:"orange"},"UnemploymentPulse")),c.a.createElement($,{className:"margin-left-1 margin-right-1",style:{lineHeight:"1.2"}},c.a.createElement(q,{color:"blue",customLineHeight:"1"},"14-Month US State and County"),c.a.createElement("br",null),c.a.createElement(q,{color:"blue",customLineHeight:"1"},"Unemployment Trend Lines")),c.a.createElement("div",{className:"leader-quarter",style:{cursor:"pointer"},onClick:t},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",height:"24",width:"24"},c.a.createElement("path",{d:"M12.5 7.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM13 18V9h-2v1h1v8h-1v1h3v-1zm9.8-5.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"}))))},te=function(e){var t=e.children,n=e.infoBtnOnClick;return c.a.createElement(K,null,c.a.createElement(ee,{infoBtnOnClick:n}),t)};function ne(){var e=B()(["\n    max-width: 500px;\n\n    svg {\n        stroke: ",";\n        fill: ",";\n    }\n"]);return ne=function(){return e},e}function re(){var e=B()(["\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    z-index: 10;\n    background-color: rgba(3, 26, 57, 0.8);\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 2rem;\n    box-sizing: border-box;\n"]);return re=function(){return e},e}var ae=G.a.div(re()),oe=G.a.div(ne(),"#136AA4","#136AA4"),ie=function(e){var t=e.isActive,n=e.onClose;return t?c.a.createElement(ae,{className:"animate-fade-in"},c.a.createElement(oe,{className:"text-theme-color-blue avenir-demi"},c.a.createElement("div",{className:"text-right cursor-pointer",onClick:n},c.a.createElement("svg",{height:"32",width:"32",viewBox:"0 0 32 32",className:""},c.a.createElement("path",{d:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"}))),c.a.createElement("p",null,c.a.createElement("span",{className:"text-theme-color-orange"},"UnemploymentPulse")," ","visualizes a moving 14-month window of unemployment data at the state and county level, as reported by the Bureau of Labor and Statistics. Local rates are shown alongside national rate."),c.a.createElement("p",null,"There are two options for visualizing these trends. The first shows local rates of unemployment alongside national rates, for context. The second option shows when local rates went above or below the national rate."),c.a.createElement("p",null,"UnemploymentPulse is a collaboration of architect"," ",c.a.createElement("a",{rel:"noreferrer",href:"https://github.com/vannizhang",target:"_blank"},"Jinnan Zhang"),", demographer"," ",c.a.createElement("a",{rel:"noreferrer",href:"https://www.esri.com/arcgis-blog/author/dianaclavery_global/",target:"_blank"},"Diana Lavery"),", and cartographer"," ",c.a.createElement("a",{rel:"noreferrer",href:"https://adventuresinmapping.com/",target:"_blank"},"John Nelson"),", members of the Esri Living Atlas team. The Living Atlas is a repository of curated geographic data from all sectors of the mapping community. Find more BLS-related resources"," ",c.a.createElement("a",{rel:"noreferrer",href:"https://livingatlas.arcgis.com/en/browse/#d=2&q=Bureau%20of%20Labor%20Statistics",target:"_blank"},"here"),"."))):null};function le(){var e=B()(["\n    margin-right: 2rem;\n    width: 380px;\n"]);return le=function(){return e},e}var ce=G.a.div(le()),ue=function(e){var t=e.data,n=Object(l.useMemo)((function(){return Math.floor((t.attributes.workforce-t.attributes.unemployed)/t.attributes.workforce*100)}),[t]);return c.a.createElement(ce,null,c.a.createElement("div",{className:"trailer-half"},c.a.createElement("div",null,c.a.createElement(q,{color:"orange",size:"large"},t.attributes.name)),c.a.createElement("div",{className:"avenir-bold font-size-0"},c.a.createElement(q,{color:"orange"},w.numberFns.numberWithCommas(t.attributes.population))," ",c.a.createElement(q,null,"Total population"))),c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("div",{className:"padding-right-1",style:{borderRight:"1px solid ".concat("rgba(20,106,164,.5)")}},c.a.createElement(J,{title:"Labor Force",value:w.numberFns.numberWithCommas(t.attributes.workforce)}),c.a.createElement(J,{title:"Participation Rate",value:"".concat(n,"%")})),c.a.createElement("div",{className:"margin-left-1"},c.a.createElement(J,{title:"Employed",value:w.numberFns.numberWithCommas(t.attributes.workforce-t.attributes.unemployed)}),c.a.createElement(J,{title:"Unemployed",value:w.numberFns.numberWithCommas(t.attributes.unemployed)}))))};function se(){var e=B()(["\n    border-right: 1px solid ",";\n    min-width: 85px;\n    padding-right: 0.75rem;\n    margin-right: 1rem;\n\n    @media (max-width: ","px) {\n        border-right: none;\n        width: 45%;\n        padding-right: 0.25rem;\n        margin-right: 0.25rem;\n    }\n"]);return se=function(){return e},e}function me(){var e=B()(["\n    display: flex;\n\n    @media (max-width: ","px) {\n        flex-wrap: wrap;\n    }\n"]);return me=function(){return e},e}function fe(){var e=B()(["\n    line-height: 1.1;\n    margin-right: 2rem;\n\n    @media (max-width: ","px) {\n        margin-right: 0.75rem;\n    }\n"]);return fe=function(){return e},e}function de(){var e=B()(["\n    margin-right: 4rem;\n\n    @media (max-width: ","px) {\n        margin-right: unset;\n        margin: 1rem 0;\n        padding: 1rem 0;\n        border-top: 1px solid ",";\n        border-bottom: 1px solid ",";\n    }\n"]);return de=function(){return e},e}var pe=G.a.div(de(),767,"rgba(20,106,164,.5)","rgba(20,106,164,.5)"),he=G.a.div(fe(),767),ve=G.a.div(me(),767),be=G.a.div(se(),"rgba(20,106,164,.5)",767),ge=function(e,t){for(var n=e.PctUnemployed,r=n.length-2,a=n.length-13,o=0,i=0,l=0;l<n.length;l++)n[l]>n[i]&&(i=l),n[l]<n[o]&&(o=l);return[r,a,o,i].map((function(e){var r=n[e],a=t[e].split(" "),o=f()(a,2),i=o[0],l=o[1];return{month:"".concat(i.slice(0,3).toUpperCase()," '").concat(l.slice(2)),value:r}}))},ye=function(e){return e<4?c.a.createElement(c.a.Fragment,null,c.a.createElement(q,{customLineHeight:"1"},"Indicative of an"),c.a.createElement("br",null),c.a.createElement(q,{customLineHeight:"1"},"Economic Boom")):e<6?c.a.createElement(c.a.Fragment,null,c.a.createElement(q,{customLineHeight:"1"},"Healthy Levels"),c.a.createElement("br",null),c.a.createElement(q,{customLineHeight:"1"},"of Employment")):c.a.createElement(c.a.Fragment,null,c.a.createElement(q,{customLineHeight:"1"},"Recession Level"),c.a.createElement("br",null),c.a.createElement(q,{customLineHeight:"1"},"Unemployment"))},Ee=function(e){var t=e.data,n=Object(l.useContext)(j),r=n.months,a=n.isMobileDevice,o=Object(l.useMemo)((function(){return ge(t,r)}),[t]),i=f()(o,4),u=i[0],s=i[1],m=i[2],d=i[3];return c.a.createElement(pe,null,c.a.createElement("div",null,c.a.createElement(q,null,"Unemployment Rate")),c.a.createElement("div",{style:{display:"flex",marginBottom:a?"1rem":"unset"}},c.a.createElement(he,null,c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(q,{color:"orange",customFontSize:a?"5rem":"7rem"},t.attributes.unemploymentRate),c.a.createElement("span",{className:"leader-half"},c.a.createElement(q,{color:"orange",customFontSize:a?"2rem":"4rem"},"%")))),c.a.createElement("div",{style:{maxWidth:170}},c.a.createElement("div",{style:{lineHeight:"1.2",marginTop:".75rem",marginBottom:".75rem"}},ye(t.attributes.unemploymentRate)),c.a.createElement("div",{style:{lineHeight:"1.2"}},c.a.createElement(q,{customLineHeight:"1"},"Ranks #",w.numberFns.numberWithCommas(t.attributes.rank)),c.a.createElement("br",null),c.a.createElement(q,{customLineHeight:"1"},2===t.attributes.fips.length?"of 50 States and DC":"of 3,141 Counties")))),c.a.createElement(ve,null,c.a.createElement(be,null,c.a.createElement(J,{title:"Last Month",value:u.value.toString()})),c.a.createElement(be,null,c.a.createElement(J,{title:"Last Year",value:s.value.toString()})),c.a.createElement(be,null,c.a.createElement(J,{title:"14-Month HIGH",subtitle:d.month,value:d.value.toString()})),c.a.createElement(J,{title:"14-Month LOW",subtitle:m.month,value:m.value.toString()})))},xe=n(3),we={top:15,right:15,bottom:25,left:30},je=function(e){var t=e.xScale,n=e.yScale,r=e.data,a=e.svgContainerData,o=e.color,i=Object(l.useRef)();return Object(l.useEffect)((function(){var e,l;a&&t&&n&&r&&(e=a.dimension.height,(l=Object(xe.j)(i.current).selectAll("rect")).size()&&l.remove(),Object(xe.j)(i.current).selectAll("rect").data(r).enter().append("rect").style("fill",o||"#FF8000").attr("x",(function(e){return t(e.key)})).attr("width",t.bandwidth()).attr("y",(function(e){return n(e.value)})).attr("height",(function(t){return e-n(t.value)})))}),[t,n,r]),c.a.createElement("g",{ref:i,className:"bar-group"})},Oe=function(e){var t=e.xScale,n=e.yScale,r=e.data,a=e.svgContainerData,o=e.color,i=e.width,u=c.a.useRef(),s=Object(l.useMemo)((function(){return"bandwidth"in t?t.bandwidth()/2:0}),[t]),m=Object(l.useMemo)((function(){return Object(xe.d)().curve(xe.c).x((function(e){return"bandwidth"in t?t(e.key)+s:t(+e.key)})).y((function(e){return n(e.value)}))}),[t,n]),f=function(){var e=Object(xe.j)(u.current).selectAll("path");e.size()&&e.remove().exit()};return Object(l.useEffect)((function(){a&&t&&n&&r&&(f(),Object(xe.j)(u.current).append("path").data([r]).attr("d",m).style("fill","none").style("stroke",o||"#136AA4").style("stroke-width",i||2))}),[t,n,r]),c.a.createElement("g",{ref:u,className:"line-group"})},Me=function(e){var t=e.xScale,n=e.xDomain,r=e.svgContainerData,a=e.onHover,o=Object(l.useRef)(),i=Object(l.useRef)(),u=function(e){i.current=e,s(),a(e)},s=function(){var e=Object(xe.j)(o.current).select("line"),t=i.current?1:0,n=i.current?i.current.xPosition:0;e.attr("x1",n).attr("x2",n).style("opacity",t)},m=function(e){var a=r.dimension.width,o="bandwidth"in t?t.bandwidth()/2:0;if(e<o||e>a-o){var i=e<o?0:n.length-1,l=n[i];return{index4ItemOnHover:i,xPosition:"bandwidth"in t?t(l)+o:t(+l)}}for(var c=-1,u=0,s=0,m=n.length;s<m;s++){var f=n[s],d="bandwidth"in t?t(f)+o:t(+f),p=n[s+1]?s+1:s,h=n[p],v="bandwidth"in t?t(h)+o:t(+h);if(e>=d&&e<=v){var b=Math.abs(e-d),g=Math.abs(e-v);c=b<g?s:p,u=b<g?d:v;break}}return{index4ItemOnHover:c,xPosition:u}};return Object(l.useEffect)((function(){var e,t;r&&(e=r.dimension.height,(t=Object(xe.j)(o.current)).selectAll("line").size()||t.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",e).style("opacity",0).attr("stroke-width",.5).attr("stroke","rgba(20,106,164,.5)").style("fill","none"),function(){var e=r.dimension,t=e.height,n=e.width,a=Object(xe.j)(o.current);a.selectAll("rect").remove(),a.append("rect").attr("width",n).attr("height",t).attr("fill","rgba(0,0,0,0)").on("mouseleave",(function(){u(null)})).on("mousemove",(function(){var e=Object(xe.f)(this)[0];u(m(e))}))}())}),[r]),c.a.createElement("g",{className:"pointer-event-overlay-group",ref:o})},Se=function(e){var t=e.margin,n=void 0===t?we:t,r=e.resizable,a=e.dimensionOnChange,o=e.children,i=Object(l.useRef)(),u=Object(l.useRef)(),s=Object(l.useRef)(),m=Object(l.useRef)(),d=c.a.useState(),p=f()(d,2),h=p[0],v=p[1],b=function(){var e=Object(xe.j)(u.current).node(),t=Object(xe.j)(s.current).node(),r=i.current,o=r.offsetWidth-n.left-n.right,l=r.offsetHeight-n.top-n.bottom;m.current={height:l,width:o},a&&a(m.current),v({svg:e,rootGroup:t,margin:n,dimension:m.current})};return Object(l.useEffect)((function(){b()}),[]),Object(l.useLayoutEffect)((function(){return r&&window.addEventListener("resize",b),function(){window.removeEventListener("resize",b)}}),[]),c.a.createElement("div",{ref:i,style:{position:"relative",width:"100%",height:"100%"}},c.a.createElement("svg",{ref:u,style:{width:"100%",height:"100%"}},c.a.createElement("g",{ref:s,style:{transform:"translate(".concat(n.left,"px, ").concat(n.top,"px)")}},h?c.a.Children.map(o,(function(e){return c.a.cloneElement(e,{svgContainerData:h})})):null)))},ke=function(e){var t=e.dimension,n=e.pointerPosition,r=e.data4Bars,a=e.data4Line,o=e.margin,i=void 0===o?we:o,u=c.a.useRef(),s=c.a.useState({top:0,left:0}),m=f()(s,2),d=m[0],p=m[1];return Object(l.useEffect)((function(){n&&function(){var e=u.current;if(e){var r=t.width,a=e.offsetWidth,o=-(e.offsetHeight-i.top),l=n.xPosition+i.left,c=l+a/2>=r+i.left?l-a:l-a/2;c=c>=i.left?c:i.left,p({top:o,left:c})}}()}),[n]),c.a.createElement("div",{ref:u,style:{display:n?"block":"none",position:"absolute",left:"".concat(d.left,"px"),top:"".concat(d.top,"px"),pointerEvents:"none",boxSizing:"border-box",boxShadow:"0 0 10px 2px ".concat("#rgba(0,0,0,.25)"),zIndex:5}},c.a.createElement(Pe,{index4ItemOnHover:n?n.index4ItemOnHover:-1,barDataOnHover:n&&r?r[n.index4ItemOnHover]:void 0,lineDataOnHover:n&&a?a[n.index4ItemOnHover]:void 0}))},Pe=function(e){e.index4ItemOnHover;var t=e.barDataOnHover,n=e.lineDataOnHover;return c.a.createElement("div",{className:"font-size--1 avenir-bold",style:{padding:".5rem",background:"rgba(3, 26, 57, 0.9)",color:"#fff"}},c.a.createElement("div",null,c.a.createElement("span",{className:"text-theme-color-orange"},"Local: ",t?t.value:"n/a","%"),c.a.createElement("br",null),c.a.createElement("span",{className:"text-theme-color-blue"},"National: ",n?n.value:"n/a","%")))},Ce=function(e){var t=e.scale,n=e.svgContainerData,r=e.tickValues,a=e.timeFormatSpecifier,o=Object(l.useContext)(j).months,i=a?Object(xe.k)(a):null;return Object(l.useEffect)((function(){n&&function(){var e=n.rootGroup,a=n.dimension.height,l=null;l=Object(xe.a)(t),r&&l.tickValues(r),i&&l.tickFormat((function(e){var t=new Date(+e);return i(t)})),l.tickFormat((function(e){var t=o[e].split(" "),n=f()(t,2),r=n[0],a=n[1],i=r.slice(0,3);return"Jan"===i?a:i}));var c=Object(xe.j)(e).selectAll(".x.axis");if(c.size())c.attr("transform","translate(0,".concat(a,")")).call(l);else{Object(xe.j)(e).append("g").attr("class","x axis").attr("transform","translate(0,".concat(a,")")).call(l);var u=Object(xe.j)(e).select(".x.axis");u.selectAll(".domain, .tick line").attr("stroke","rgba(20,106,164,.5)"),u.selectAll(".tick text").style("fill","#136AA4")}}()}),[t,n]),null},Le=function(e){var t=e.scale,n=e.svgContainerData;return Object(l.useEffect)((function(){n&&function(){var e=n.rootGroup,r=Object(xe.b)(t).ticks(3).tickPadding(5),a=Object(xe.j)(e).selectAll(".y.axis");if(a.size())a.call(r);else{Object(xe.j)(e).append("g").attr("class","y axis").call(r);var o=Object(xe.j)(e).select(".y.axis");o.selectAll(".domain, .tick line").attr("stroke","rgba(20,106,164,.5)"),o.selectAll(".tick text").style("fill","#136AA4")}}()}),[t,n]),null},ze=function(e){var t=e.data4Bars,n=void 0===t?[]:t,r=e.data4Line,a=void 0===r?[]:r,o=e.barColor,i=e.lineColor,u=e.lineWidth,s=e.margin,m=e.timeFormatSpecifier,d=e.numOfTicksOnXAxisToHide,p=e.resizable,h=void 0===p||p,b=Object(l.useState)({height:0,width:0}),g=f()(b,2),y=g[0],E=g[1],x=Object(l.useState)(),w=f()(x,2),j=w[0],O=w[1],M=Object(l.useMemo)((function(){return n.length||a.length?(n&&n.length?v()(n):v()(a)).map((function(e){return"number"==typeof e.key?e.key.toString():e.key})):[]}),[n,a]),S=Object(l.useMemo)((function(){var e=y.width;if(n&&n.length)return Object(xe.g)().paddingInner(.9).range([0,e]).domain(M);var t=+a[0].key,r=Object(xe.e)(a,(function(e){return+e.key}));return m?Object(xe.i)().range([0,e]).domain([t,r]):Object(xe.h)().range([0,e]).domain([t,r])}),[y,M]),k=Object(l.useMemo)((function(){var e=y.height,t=n&&n.length?Object(xe.e)(n,(function(e){return e.value})):0,r=a&&a.length?Object(xe.e)(a,(function(e){return e.value})):void 0,o=Object(xe.e)([t,r]);return Object(xe.h)().range([e,0]).domain([0,o])}),[y,n,a]),P=Object(l.useMemo)((function(){if(d&&!(d<=1))return n.map((function(e){return e.key})).filter((function(e,t){return!(t%d)}))}),[n]);return c.a.createElement("div",{style:{position:"relative",width:"100%",height:"100%",boxSizing:"border-box"}},c.a.createElement(Se,{margin:s,resizable:h,dimensionOnChange:E},n&&n.length?c.a.createElement(je,{data:n,xScale:S,yScale:k,color:o}):c.a.createElement(c.a.Fragment,null),a&&a.length?c.a.createElement(Oe,{data:a,xScale:S,yScale:k,color:i,width:u}):c.a.createElement(c.a.Fragment,null),c.a.createElement(Ce,{scale:S,timeFormatSpecifier:m,tickValues:P}),c.a.createElement(Le,{scale:k}),c.a.createElement(Me,{xDomain:M,xScale:S,onHover:O})),c.a.createElement(ke,{pointerPosition:j,dimension:y,data4Bars:n,data4Line:a,margin:s}))},Fe=function(e,t){return e.map((function(e,t){return{key:t,value:e}}))},Ue=function(e){var t=e.data,n=Object(l.useContext)(j),r=n.unemploymentDataByFIPS,a=(n.months,Object(l.useMemo)((function(){var e=r[0].PctUnemployed;return Fe(e)}),[r])),o=Object(l.useMemo)((function(){var e=t.PctUnemployed;return Fe(e)}),[t]);return c.a.createElement("div",{style:{position:"relative",flexGrow:1}},c.a.createElement("div",{className:"text-right",style:{position:"absolute",top:".75rem",right:"1rem"}},c.a.createElement(q,{color:"orange",size:"small"},"Local Unemployment"),c.a.createElement("br",null),c.a.createElement(q,{color:"blue",size:"small"},"National Unemployment"),c.a.createElement("br",null),c.a.createElement(q,{color:"blue"},a?a[a.length-1].value:"","%")),c.a.createElement(ze,{data4Bars:o,data4Line:a}))};function Ae(){var e=B()(["\n    position: absolute;\n    top: 0.5rem;\n    right: 0.5rem;\n    cursor: pointer;\n\n    svg {\n        stroke: ",";\n        fill: ",";\n    }\n"]);return Ae=function(){return e},e}function Ie(){var e=B()(["\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    height: 250px;\n    display: flex;\n    box-sizing: border-box;\n    background: linear-gradient(\n        to top,\n        "," 0%,\n        "," 80%,\n        rgba(0, 0, 0, 0) 100%\n    );\n    padding: 1rem 2rem;\n    /* box-shadow: 0 0 10px 2px #156aa4; */\n    z-index: 5;\n\n    @media (max-width: ","px) {\n        top: 0;\n        bottom: 0;\n        height: unset;\n        flex-direction: column;\n        overflow-y: auto;\n\n        background: ",";\n    }\n"]);return Ie=function(){return e},e}var He=G.a.div(Ie(),"rgba(3, 26, 57, 0.9)","rgba(3, 26, 57, 0.9)",767,"rgba(3, 26, 57, 0.9)"),De=G.a.div(Ae(),"#136AA4","#136AA4"),_e=function(e){var t=e.data,n=e.close;return t?c.a.createElement(He,{className:"animate-fade-in"},c.a.createElement(ue,{data:t}),c.a.createElement(Ee,{data:t}),c.a.createElement(Ue,{data:t}),c.a.createElement(De,{onClick:n},c.a.createElement("svg",{height:"32",width:"32",viewBox:"0 0 32 32",className:""},c.a.createElement("path",{d:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"})))):null},Re=function(e){var t=e.queryResult,n=e.mapView,r=Object(l.useState)(),o=f()(r,2),c=o[0],u=o[1],s=function(){var e=i()(a.a.mark((function e(){var t,r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.loadModules)(["esri/layers/GraphicsLayer"]);case 3:t=e.sent,r=f()(t,1),o=r[0],i=new o({opacity:.2}),n.map.add(i,0),u(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=i()(a.a.mark((function e(){var n,r,o,i,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.loadModules)(["esri/Graphic","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol"]);case 2:n=e.sent,r=f()(n,3),o=r[0],i=r[1],l=r[2],(u=new o({geometry:new i(t.geometry)})).symbol=new l({color:[33,117,160,255]}),c.add(u);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){n&&s()}),[n]),Object(l.useEffect)((function(){c&&(c.removeAll(),t&&m())}),[t]),null},Ne=function(e){var t=e.url,n=e.outFields,r=e.mapView,o=e.visibleScale,c=e.onSelect,u=Object(l.useRef)(),s=Object(l.useRef)(),m=function(){var e=i()(a.a.mark((function e(){var i,l,c,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.loadModules)(["esri/layers/FeatureLayer"]);case 3:i=e.sent,l=f()(i,1),c=l[0],m=new c({url:t,minScale:o&&o.min,maxScale:o&&o.max,visible:!0,popupEnabled:!1,outFields:n,opacity:0}),r.map.add(m),r.whenLayerView(m).then((function(e){u.current=m,s.current=e,p()})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=i()(a.a.mark((function e(t){var o,i,l,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.event,i=t.where,!(r.scale<u.current.minScale&&r.scale>u.current.maxScale)){e.next=9;break}return i=i||"1=1",l=o?r.toMap(o):null,e.next=7,s.current.queryFeatures({where:i,geometry:l,returnGeometry:!0,outFields:n||["*"]});case 7:m=e.sent,c(m.features&&m.features.length?m.features[0]:void 0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){r.on("click",(function(e){d({event:e})}))};return Object(l.useEffect)((function(){r&&m()}),[r]),null},Be=function(e){var t=e.data,n=e.nationalLevelData,r=e.showDeviation,o=e.color,c=e.referenceLineColor,u=e.visibleScale,s=e.mapView,m=Object(l.useRef)(),d=Object(l.useRef)(),p=Object(l.useState)(!1),h=f()(p,2),v=h[0],b=h[1],g=function(){var e=i()(a.a.mark((function e(){var t,n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.loadModules)(["esri/layers/GraphicsLayer","esri/core/watchUtils"]);case 3:t=e.sent,n=f()(t,2),r=n[0],o=n[1],d.current=new r({minScale:u&&u.min,maxScale:u&&u.max,visible:!1}),s.map.add(d.current),o.whenTrue(s,"stationary",(function(){var e=s.scale<u.min&&s.scale>u.max;b(e)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=i()(a.a.mark((function e(){var i,l,u,s,p,h,v,b,g,y,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=d.current,l=n.features[0].PctUnemployed.path,u=n.frames.PctUnemployed,e.prev=3,e.next=6,Object(S.loadModules)(["esri/symbols/CIMSymbol","esri/Graphic","esri/geometry/Point"]);case 6:s=e.sent,p=f()(s,3),h=p[0],v=p[1],b=p[2],g=t.features,y=t.frames,E=r?y.PctUnemployedDeviation:y.PctUnemployed,function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=800,a=t+n<g.length?t+n:g.length,s=g.slice(t,a),f=s.map((function(e){var t=e.geometry,n=e.PctUnemployed,a=e.PctUnemployedDeviation,i={x:0,y:r?0:-.5},s=r?60:30,m=(r?a:n).path,f=new h({data:{type:"CIMSymbolReference",symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",anchorPoint:i,anchorPointUnits:"Relative",enable:!0,scaleSymbolsProportionally:!1,respectFrame:!0,size:s,frame:E,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[m]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:1,color:o}]}}]},r?null:{type:"CIMVectorMarker",anchorPoint:i,anchorPointUnits:"Relative",enable:!0,scaleSymbolsProportionally:!1,respectFrame:!0,size:s,frame:u,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[l]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:1,color:c}]}}]},r?{type:"CIMVectorMarker",anchorPoint:i,anchorPointUnits:"Relative",enable:!0,scaleSymbolsProportionally:!1,respectFrame:!0,size:s,frame:E,markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[0,0],[E.xmax,0]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:1,color:c}]}}]}:null]}}});return new v({geometry:new b({latitude:t.y,longitude:t.x}),symbol:f})}));i.addMany(f),t+n<g.length?m.current=setTimeout((function(){e(t+n)}),1):i.visible=!0}(0),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){s&&g()}),[s]),Object(l.useEffect)((function(){d.current&&t&&(d.current.removeAll(),clearTimeout(m.current),v&&y())}),[d,t,r]),Object(l.useEffect)((function(){t&&v&&!d.current.graphics.length&&(clearTimeout(m.current),y())}),[v]),null},Ge=function(e){var t=e.isActive,n=e.onClick,r=e.children,a=t?"#FF8000":"transparent";return c.a.createElement("div",{onClick:n,style:{borderBottom:"3px solid ".concat(a),margin:"0 .5rem",cursor:"pointer"}},r)},Te=function(e){var t=e.showDeviation,n=e.onChange;return c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement(Ge,{isActive:!t,onClick:n},c.a.createElement(q,{color:"orange"},"Local Rate")," ",c.a.createElement(q,{color:"blue"},"& "," National Rate")),c.a.createElement(Ge,{isActive:t,onClick:n},c.a.createElement(q,{color:"orange"},"Local Difference")," ",c.a.createElement(q,{color:"blue"},"from National Rate")))},Ve=function(){return c.a.createElement(R,null)};i()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(M,null,c.a.createElement(Ve,null))),document.getElementById("root"));case 1:case"end":return e.stop()}}),e)})))()},98:function(e,t,n){}});
//# sourceMappingURL=main.46a172f95c42574072a7.js.map